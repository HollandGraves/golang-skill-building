package main

import (
	"html/template"
	"log"
	"os"
)

/*
	will parse "tpl" folder
	pass functions into parsed templates
	execute the parsed templates with a simple piece of data
*/

// //////////////////////////////////////////////////////////////////////////////////
// DATA DECLARATIONS
// //////////////////////////////////////////////////////////////////////////////////

var tpl *template.Template

var fm = template.FuncMap{
	"add":    add,
	"double": double,
}

// //////////////////////////////////////////////////////////////////////////////////
// PACKAGE FUNCTIONS
// //////////////////////////////////////////////////////////////////////////////////

func add(x int, y int) int {
	return x + y
}

func double(x int) int {
	return x * 2
}

func init() {
	tpl = template.Must(template.New("").Funcs(fm).ParseGlob("tpl/*.gohtml"))
}

// //////////////////////////////////////////////////////////////////////////////////
// MAIN FUNCTION
// //////////////////////////////////////////////////////////////////////////////////

func main() {
	err := tpl.ExecuteTemplate(os.Stdout, "index.gohtml", 42)
	if err != nil {
		log.Fatal(err)
	}
}
